<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compare My JSON</title>
    <meta name="description" content="Vergleiche zwei JSON-Dateien und finde Unterschiede">
    <meta name="theme-color" content="#22d3ee">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icons/icon.svg">
  </head>
  <body>
    <div class="headline">
      <h1>Compare My JSON</h1>
    </div>

    <div class="controls">
      <button id="compareBtn" class="styled-btn styled-btn-primary">
        <span class="styled-btn-inner">
          <span class="btn-icon">A ⇄ B</span> Vergleichen
        </span>
      </button>
      <button id="scanPropsBtn" class="styled-btn styled-btn-violet">
        <span class="styled-btn-inner">Properties scannen</span>
      </button>
      <div class="property-selector">
        <button id="propSelectorBtn" class="styled-btn styled-btn-violet" disabled>
          <span class="styled-btn-inner">
            <span class="prop-selector-text">Properties auswählen</span>
            <span class="prop-selector-arrow">▼</span>
          </span>
        </button>
        <div id="propSelectorDropdown" class="prop-selector-dropdown">
          <div class="prop-selector-actions">
            <a href="#" id="selectAllProps">Alle auswählen</a>
            <a href="#" id="deselectAllProps">Alle abwählen</a>
          </div>
          <div class="prop-selector-list" id="propSelectorList"></div>
        </div>
      </div>
      <button id="preFilterBtn" class="styled-btn styled-btn-violet" disabled>
        <span class="styled-btn-inner">
          <svg class="pre-filter-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
          Pre-Filter
          <span id="preFilterBadge" class="pre-filter-badge" style="display:none;">0</span>
        </span>
      </button>
      <div class="normalize-selector">
        <button id="normalizeBtn" class="styled-btn styled-btn-primary">
          <span class="styled-btn-inner">
            <span class="btn-icon">↕</span> Normalisieren
            <span class="normalize-arrow">▼</span>
          </span>
        </button>
        <div id="normalizeDropdown" class="normalize-dropdown">
          <button class="normalize-option" data-mode="a-master">
            <span class="option-icon">A →</span> A ist Master
          </button>
          <button class="normalize-option" data-mode="b-master">
            <span class="option-icon">B →</span> B ist Master
          </button>
          <button class="normalize-option" data-mode="alphabetical">
            <span class="option-icon">A-Z</span> Alphabetisch
          </button>
        </div>
      </div>
      <button id="exampleBtn" class="styled-btn styled-btn-gray">
        <span class="styled-btn-inner">Beispiel laden</span>
      </button>
      <button id="helpBtn" class="styled-btn styled-btn-yellow">
        <span class="styled-btn-inner">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
          Hilfe
        </span>
      </button>
    </div>

    <div id="helpModal" class="help-modal">
      <div class="help-modal-content">
        <div class="help-modal-header">
          <h2>Hilfe</h2>
          <button id="helpCloseBtn" class="help-modal-close">&times;</button>
        </div>
        <div id="helpModalBody" class="help-modal-body">
          <h1>Compare My JSON</h1>
          <p>Eine clientseitige Webanwendung zum Vergleichen von JSON-Daten. Keine Server-Komponente erforderlich - l&auml;uft vollst&auml;ndig im Browser.</p>

          <h2>Features</h2>

          <h3>JSON-Eingabe</h3>
          <ul>
            <li><strong>Zwei Editoren</strong> f&uuml;r JSON A und JSON B mit Syntax-Highlighting</li>
            <li><strong>Datei-Upload</strong> per Button oder Drag &amp; Drop</li>
            <li><strong>JSON formatieren</strong> - formatiert einzelne JSONs mit Einr&uuml;ckung</li>
            <li><strong>Kopieren</strong> des Inhalts in die Zwischenablage</li>
            <li><strong>Leeren</strong> einzelner Textareas</li>
            <li><strong>Vollbild-Modus</strong> f&uuml;r komplexere JSON-Strukturen</li>
            <li><strong>Aliase</strong> f&uuml;r die JSON-Quellen (z.B. "Production", "Staging")</li>
            <li><strong>Beispieldaten</strong> zum schnellen Testen</li>
          </ul>

          <h3>JSON-Normalisierung</h3>
          <ul>
            <li><strong>A ist Master</strong> - sortiert B nach der Key-Reihenfolge von A</li>
            <li><strong>B ist Master</strong> - sortiert A nach der Key-Reihenfolge von B</li>
            <li><strong>Alphabetisch</strong> - sortiert beide JSONs alphabetisch nach Keys</li>
            <li>Erleichtert den visuellen Vergleich bei unterschiedlicher Key-Reihenfolge</li>
          </ul>

          <h3>Property-Vorauswahl (Pre-Comparison Selection)</h3>
          <ul>
            <li><strong>Properties scannen</strong> extrahiert alle Felder aus beiden JSONs</li>
            <li><strong>Multi-Select Dropdown</strong> zur Auswahl der zu vergleichenden Properties</li>
            <li><strong>Farbkodierung</strong> zeigt Herkunft:
              <ul>
                <li>Cyan: in beiden JSONs vorhanden</li>
                <li>Rot: nur in A</li>
                <li>Gr&uuml;n: nur in B</li>
              </ul>
            </li>
            <li><strong>Alle ausw&auml;hlen / Alle abw&auml;hlen</strong> f&uuml;r schnelle Selektion</li>
            <li><strong>Unbegrenzte Tiefe</strong> - funktioniert mit beliebig verschachtelten Strukturen</li>
            <li><strong>Einr&uuml;ckung</strong> visualisiert die Verschachtelungsebene</li>
            <li><strong>Array-Key-Auswahl</strong> - manuelle Wahl des Vergleichs-Keys f&uuml;r Arrays (Auto, Index-basiert, oder spezifischer Key)</li>
          </ul>

          <h3>Vergleich</h3>
          <ul>
            <li><strong>Struktureller Vergleich</strong> von JSON-Objekten</li>
            <li><strong>Array-Vergleich</strong> nach Vorhandensein (nicht nach Position)</li>
            <li><strong>Rekursiver Vergleich</strong> verschachtelter Objekte</li>
            <li><strong>Selektiver Vergleich</strong> nur ausgew&auml;hlter Properties</li>
            <li><strong>Drei Unterschiedstypen</strong>:
              <ul>
                <li>Nur in A (rot)</li>
                <li>Nur in B (gr&uuml;n)</li>
                <li>Unterschiedliche Werte (cyan)</li>
              </ul>
            </li>
          </ul>

          <h3>Key-basierter Array-Vergleich</h3>
          <p>Bei Arrays von Objekten k&ouml;nnen ein oder mehrere Properties als <strong>Identifier-Keys</strong> definiert werden, um Objekte eindeutig zu identifizieren - unabh&auml;ngig von ihrer Position im Array.</p>

          <h4>Vergleichs-Modi</h4>
          <table>
            <thead>
              <tr><th>Modus</th><th>Beschreibung</th><th>Pfad-Format</th></tr>
            </thead>
            <tbody>
              <tr><td><strong>Auto</strong></td><td>Automatische Key-Erkennung (id, name, etc.)</td><td><code>array[key=value]</code></td></tr>
              <tr><td><strong>Index</strong></td><td>Position-basierter Vergleich</td><td><code>array[0]</code>, <code>array[1]</code></td></tr>
              <tr><td><strong>Manuell</strong></td><td>Ein oder mehrere Keys ausw&auml;hlen</td><td><code>array[key1=val1,key2=val2]</code></td></tr>
            </tbody>
          </table>

          <h4>Composite Keys (Zusammengesetzte Schl&uuml;ssel)</h4>
          <p>Wenn ein einzelner Key nicht eindeutig ist, k&ouml;nnen mehrere Keys kombiniert werden:</p>
          <p><strong>Beispiel:</strong> Eine Firma hat mehrere Mitarbeiter pro Abteilung. <code>abteilung</code> allein ist nicht eindeutig, aber <code>abteilung</code> + <code>name</code> zusammen identifiziert jeden Mitarbeiter.</p>

          <h4>Key-Auswahl im UI</h4>
          <ol>
            <li><strong>Properties scannen</strong> klicken</li>
            <li>Beim Array (z.B. <code>permission</code>) auf den <strong>Key-Button</strong> klicken</li>
            <li><strong>"Keys w&auml;hlen"</strong> ausw&auml;hlen und die gew&uuml;nschten Keys aktivieren</li>
            <li>Key-Properties werden markiert und aus dem Vergleich ausgeschlossen (da sie zur Identifikation dienen, nicht zum Vergleich)</li>
          </ol>

          <h3>Pre-Filter (Daten vor dem Vergleich filtern)</h3>
          <p>Mit dem Pre-Filter k&ouml;nnen Array-Daten <strong>vor dem Vergleich</strong> gefiltert werden. Nur Elemente, die den Filterbedingungen entsprechen, werden in den Vergleich einbezogen.</p>

          <h4>Wann ist der Pre-Filter n&uuml;tzlich?</h4>
          <ul>
            <li>Gro&szlig;e Arrays mit vielen Objekten, von denen nur eine Teilmenge relevant ist</li>
            <li>Vergleich nur bestimmter Datens&auml;tze (z.B. nur aktive Mitarbeiter, nur IT-Abteilung)</li>
            <li>Ausblenden irrelevanter Daten, um das Ergebnis &uuml;bersichtlicher zu gestalten</li>
          </ul>

          <h4>Verf&uuml;gbare Operatoren</h4>
          <table>
            <thead>
              <tr><th>Operator</th><th>Beschreibung</th><th>Beispiel</th></tr>
            </thead>
            <tbody>
              <tr><td><code>==</code></td><td>Gleich</td><td><code>abteilung == "IT"</code></td></tr>
              <tr><td><code>!=</code></td><td>Ungleich</td><td><code>status != "inaktiv"</code></td></tr>
              <tr><td><code>&gt;</code></td><td>Gr&ouml;&szlig;er als</td><td><code>gehalt &gt; 50000</code></td></tr>
              <tr><td><code>&lt;</code></td><td>Kleiner als</td><td><code>alter &lt; 30</code></td></tr>
              <tr><td><code>&gt;=</code></td><td>Gr&ouml;&szlig;er oder gleich</td><td><code>bewertung &gt;= 4</code></td></tr>
              <tr><td><code>&lt;=</code></td><td>Kleiner oder gleich</td><td><code>preis &lt;= 100</code></td></tr>
              <tr><td><code>contains</code></td><td>Enth&auml;lt (Teilstring, case-insensitive)</td><td><code>name contains "m&uuml;ller"</code></td></tr>
            </tbody>
          </table>

          <h4>Bedingungslogik</h4>
          <p>Mehrere Bedingungen werden mit <strong>UND-Verkn&uuml;pfung</strong> kombiniert. Ein Array-Element muss <strong>alle</strong> Bedingungen gleichzeitig erf&uuml;llen.</p>

          <h4>Verwendung</h4>
          <ol>
            <li>JSON-Daten eingeben</li>
            <li><strong>&quot;Properties scannen&quot;</strong> klicken (Pre-Filter-Button wird danach aktiv)</li>
            <li><strong>Pre-Filter-Button</strong> klicken (violetter Filter-Button)</li>
            <li><strong>Pfad</strong> ausw&auml;hlen &mdash; zeigt alle filterbaren Arrays (z.B. <code>firma.mitarbeiter</code>)</li>
            <li><strong>Feld</strong> ausw&auml;hlen &mdash; die Properties der Array-Objekte (z.B. <code>abteilung</code>)</li>
            <li><strong>Operator</strong> und <strong>Wert</strong> einstellen</li>
            <li>Optional: <strong>&quot;+ Bedingung&quot;</strong> f&uuml;r weitere Filter-Kriterien</li>
            <li><strong>&quot;Anwenden&quot;</strong> klicken</li>
            <li><strong>&quot;Vergleichen&quot;</strong> klicken &mdash; nur gefilterte Elemente werden verglichen</li>
          </ol>

          <h4>Beispiel</h4>
          <p><strong>JSON mit Mitarbeitern:</strong></p>
          <pre><code>{
  "firma": {
    "mitarbeiter": [
      { "name": "Max", "abteilung": "IT", "gehalt": 55000 },
      { "name": "Anna", "abteilung": "HR", "gehalt": 48000 },
      { "name": "Peter", "abteilung": "IT", "gehalt": 62000 }
    ]
  }
}</code></pre>
          <p><strong>Pre-Filter:</strong> <code>firma.mitarbeiter</code> &rarr; <code>abteilung</code> == <code>IT</code></p>
          <p><strong>Ergebnis:</strong> Nur Max und Peter werden verglichen. Anna (HR) wird aus dem Vergleich ausgeschlossen.</p>

          <h4>Visuelle Hinweise</h4>
          <ul>
            <li><strong>Badge</strong> am Pre-Filter-Button zeigt die Anzahl aktiver Filter</li>
            <li><strong>Orange Markierungen</strong> an den Zeilennummern zeigen, welche Array-Elemente dem Filter entsprechen</li>
            <li><strong>Warnung</strong> erscheint, wenn kein Objekt alle Bedingungen gleichzeitig erf&uuml;llt</li>
          </ul>

          <h3>Ergebnis-Anzeige</h3>
          <ul>
            <li><strong>Auf-/zuklappbare</strong> Unterschiede mit Datei-Icon und A/B-Kennzeichnung</li>
            <li><strong>Inline-Diff-Highlighting</strong> - markiert Unterschiede direkt in den Editoren (Toggle per Klick)</li>
            <li><strong>Filter</strong> nach Unterschiedstyp (Alle, Nur in A, Nur in B, Unterschiedlich)</li>
            <li><strong>Property-Filter</strong> zum Suchen nach bestimmten Feldnamen</li>
            <li><strong>Counter</strong> zeigen Anzahl pro Kategorie</li>
            <li><strong>Alle auf-/zuklappen</strong> Button</li>
          </ul>

          <h3>Export</h3>
          <ul>
            <li><strong>Textdatei-Export</strong> der Unterschiede</li>
            <li>Enth&auml;lt Datum, Aliase und alle Unterschiede gruppiert nach Typ</li>
          </ul>

          <h2>Verwendung</h2>
          <ol>
            <li><code>index.html</code> im Browser &ouml;ffnen</li>
            <li>JSON-Daten in die Textfelder eingeben oder Dateien laden</li>
            <li>Optional: Aliase f&uuml;r die Quellen eingeben</li>
            <li>Optional: "Properties scannen" klicken und gew&uuml;nschte Properties ausw&auml;hlen</li>
            <li>"A &#8644; B Vergleichen" klicken</li>
            <li>Unterschiede analysieren, filtern und ggf. exportieren</li>
          </ol>

          <h3>Workflow mit Property-Vorauswahl</h3>
          <pre><code>JSON eingeben &rarr; Properties scannen &rarr; Properties ausw&auml;hlen &rarr; Vergleichen</code></pre>
          <p>Dies ist besonders n&uuml;tzlich bei gro&szlig;en JSONs, wenn nur bestimmte Felder relevant sind.</p>

          <h3>Workflow mit Pre-Filter</h3>
          <pre><code>JSON eingeben &rarr; Properties scannen &rarr; Pre-Filter &ouml;ffnen &rarr; Bedingungen setzen &rarr; Anwenden &rarr; Vergleichen</code></pre>
          <p>Dies ist besonders n&uuml;tzlich, wenn nur eine bestimmte Teilmenge von Array-Daten verglichen werden soll (z.B. nur IT-Mitarbeiter, nur aktive Projekte).</p>

          <h2>Technologie</h2>
          <ul>
            <li>Reines HTML, CSS und JavaScript</li>
            <li>Kein Node.js oder Build-Prozess erforderlich</li>
            <li>Dark Mode mit Cyan-Akzentfarbe (Tailwind-inspiriert)</li>
            <li>Responsive Design</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="preFilterPanel" class="pre-filter-panel">
      <div class="pre-filter-header">
        <h3>Pre-Filter: Daten vor dem Vergleich filtern</h3>
      </div>
      <div id="preFilterConditions" class="pre-filter-conditions">
        <!-- Dynamisch gerenderte Condition-Rows -->
      </div>
      <div id="preFilterWarning" class="pre-filter-warning" style="display:none;"></div>
      <div class="pre-filter-actions">
        <button id="addConditionBtn" class="styled-btn styled-btn-violet styled-btn-sm">
          <span class="styled-btn-inner">+ Bedingung</span>
        </button>
        <button id="applyFilterBtn" class="styled-btn styled-btn-primary styled-btn-sm">
          <span class="styled-btn-inner">Anwenden</span>
        </button>
        <button id="resetFilterBtn" class="styled-btn styled-btn-gray styled-btn-sm">
          <span class="styled-btn-inner">Zurücksetzen</span>
        </button>
      </div>
    </div>

    <div class="content">
      <div class="container json-a">
        <div class="container-header">
          <h2>JSON <span class="label-a">A</span><input type="text" class="alias-input" id="aliasA" placeholder="Alias..." title="Alias eingeben"></h2>
          <div class="container-actions">
            <label class="upload-btn" title="Datei laden">
              <input type="file" id="fileA" accept=".json">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
            </label>
            <button class="format-btn" data-target="jsonA" title="Formatieren">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><path d="M9 12c-1 0-1 .5-1 1v1.5c0 .5-.5 1-1 1 .5 0 1 .5 1 1V18c0 .5 0 1 1 1"/><path d="M15 12c1 0 1 .5 1 1v1.5c0 .5.5 1 1 1-.5 0-1 .5-1 1V18c0 .5 0 1-1 1"/></svg>
            </button>
            <button class="copy-btn" data-target="jsonA" title="Kopieren">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            </button>
            <button class="clear-single-btn" data-target="jsonA" title="Leeren">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
            </button>
            <button class="expand-btn" data-target="jsonA" title="Vergrößern">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></svg>
            </button>
          </div>
        </div>
        <div class="editor-wrapper">
          <div class="line-numbers" id="lineNumbersA"></div>
          <pre class="syntax-highlight" id="highlightA"></pre>
          <textarea id="jsonA" placeholder="JSON A hier eingeben..." spellcheck="false"></textarea>
        </div>
      </div>
      <div class="container json-b">
        <div class="container-header">
          <h2>JSON <span class="label-b">B</span><input type="text" class="alias-input" id="aliasB" placeholder="Alias..." title="Alias eingeben"></h2>
          <div class="container-actions">
            <label class="upload-btn" title="Datei laden">
              <input type="file" id="fileB" accept=".json">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
            </label>
            <button class="format-btn" data-target="jsonB" title="Formatieren">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><path d="M9 12c-1 0-1 .5-1 1v1.5c0 .5-.5 1-1 1 .5 0 1 .5 1 1V18c0 .5 0 1 1 1"/><path d="M15 12c1 0 1 .5 1 1v1.5c0 .5.5 1 1 1-.5 0-1 .5-1 1V18c0 .5 0 1-1 1"/></svg>
            </button>
            <button class="copy-btn" data-target="jsonB" title="Kopieren">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            </button>
            <button class="clear-single-btn" data-target="jsonB" title="Leeren">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
            </button>
            <button class="expand-btn" data-target="jsonB" title="Vergrößern">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></svg>
            </button>
          </div>
        </div>
        <div class="editor-wrapper">
          <div class="line-numbers" id="lineNumbersB"></div>
          <pre class="syntax-highlight" id="highlightB"></pre>
          <textarea id="jsonB" placeholder="JSON B hier eingeben..." spellcheck="false"></textarea>
        </div>
      </div>
    </div>

    <div class="result-section">
      <div class="result-header">
        <h2>Unterschiede</h2>
        <div class="filter-buttons">
          <button class="filter-btn active" data-filter="all">Alle</button>
          <button class="filter-btn" data-filter="removed">Nur in A</button>
          <button class="filter-btn" data-filter="added">Nur in B</button>
          <button class="filter-btn" data-filter="changed">Unterschiedlich</button>
        </div>
        <div class="property-filter">
          <input type="text" id="propertyFilter" placeholder="Property filtern..." title="z.B. 'email' oder 'adresse.plz'">
        </div>
        <button id="toggleAllBtn" class="styled-btn styled-btn-primary styled-btn-sm">
          <span class="styled-btn-inner">Alle zuklappen</span>
        </button>
        <button id="exportBtn" class="styled-btn styled-btn-primary styled-btn-sm">
          <span class="styled-btn-inner">Exportieren</span>
        </button>
      </div>
      <div id="diffResult" class="diff-result"></div>
    </div>

    <script src="js/script.js"></script>
    <script>
      // Service Worker registrieren
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./js/sw.js')
          .then(() => console.log('Service Worker registriert'))
          .catch((err) => console.log('Service Worker Fehler:', err));
      }
    </script>
  </body>
</html>
